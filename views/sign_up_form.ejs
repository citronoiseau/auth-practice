<html>
  <head>
    <title>Sign-up</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <h1> Sign-up </h1>
    <%- include("partials/errors.ejs") %>
   <form action="/sign-up" method="POST">
    <div class="input-form"> 
        <label for="first_name">First Name: </label>
        <input type="text" name="first_name" id="firstName" required>
    </div>
    <div class="input-form"> 
        <label for="last_name">Last Name: </label>
        <input type="text" name="last_name" id="last_name" required>
    </div>
<div class="input-form"> 
  <label for="username">Username: </label>
  <input
    type="text"
    name="username"
    id="username"
    required
    pattern="^[a-zA-Z0-9_]{3,20}$"
    title="Username must be 3â€“20 characters long and contain only letters, numbers, and underscores"
  >
</div>

<div class="input-form"> 
  <label for="password">Password: </label>
  <input
    type="password"
    name="password"
    id="password"
    required
    minlength="6"
    pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{3,}$"
    title="Password must be at least 3 characters and contain at least one letter and one number"
  >
  <button type="button" onclick="togglePassword('password', this)">Show</button>
</div>

<div class="input-form"> 
  <label for="passwordConfirmation">Confirm Password: </label>
  <input
    type="password"
    name="passwordConfirmation"
    id="passwordConfirmation"
    required
    oninput="checkPasswordMatch()"
  >
   <button type="button" onclick="togglePassword('passwordConfirmation', this)">Show</button>
</div>

  <div>
    <input
      type="checkbox"
      id="isAdmin"
      name="isAdmin"
      value="admin" />
    <label for="isAdmin">Do you want to be admin?</label>
  </div>
  <div>

<p id="passwordError" style="color: red; display: none;">Passwords do not match.</p>

    
    <button type="submit">Submit</button>
  </form>
  <a href="/">Back to home</a>
</html>

<script>
  function togglePassword(fieldId, btn) {
    const field = document.getElementById(fieldId);
    if (field.type === "password") {
      field.type = "text";
      btn.textContent = "Hide";
    } else {
      field.type = "password";
      btn.textContent = "Show";
    }
  }

  function checkPasswordMatch() {
    const password = document.getElementById('password').value;
    const confirm = document.getElementById('passwordConfirmation').value;
    const error = document.getElementById('passwordError');

    if (confirm && password !== confirm) {
      error.style.display = 'block';
    } else {
      error.style.display = 'none';
    }
  }
</script>